# Firebase Console에서 projects/P1/members 생성 단계

> 작성일: 2026-01-25  
> 목적: Firebase Console에서 projects 컬렉션부터 members 서브컬렉션까지 생성하는 단계별 가이드

---

## 📋 현재 상황

스크린샷 기준:
- ✅ `kcolumn` 컬렉션 존재
- ✅ `user_roles` 컬렉션 존재
- ❌ `projects` 컬렉션 없음

**목표:** `projects/P1/members/{ADMIN_UID}` 구조 생성

---

## 🎯 단계별 생성 가이드

### Step 1: `projects` 컬렉션 생성

1. **왼쪽 패널에서 "+ 컬렉션 시작" 버튼 클릭**
   - **위치:** 왼쪽 패널의 맨 위쪽
   - 현재 보이는 것: `kcolumn`, `user_roles` 컬렉션 목록
   - 그 위에 **"+ 컬렉션 시작"** 버튼이 있습니다
   - 이 버튼을 클릭하면 새 컬렉션을 만들 수 있습니다

2. **컬렉션 ID 입력**
   - 팝업 창이 나타나면
   - 컬렉션 ID: `projects` 입력
   - "다음" 또는 "Next" 클릭

3. **첫 번째 문서 생성 (P1)**
   - 문서 ID 입력 화면이 나타나면
   - 문서 ID: `P1` 입력
   - 필드 추가 없이 "저장" 또는 "Save" 클릭
   - (또는 임시 필드 하나 추가 후 저장)

**결과:** 
- 왼쪽 패널에 `projects` 컬렉션이 나타납니다
- `projects`를 클릭하면 중간 패널에 `P1` 문서가 보입니다

---

### Step 2: `P1` 문서 내부에서 `members` 서브컬렉션 생성

1. **`P1` 문서 클릭**
   - **왼쪽 패널:** `projects` 컬렉션 클릭 (파란색으로 선택됨)
   - **중간 패널:** `P1` 문서 클릭 (파란색으로 선택됨)
   - **오른쪽 패널:** `P1` 문서의 상세 정보가 표시됩니다

2. **오른쪽 패널에서 "+ 컬렉션 시작" 버튼 찾기**
   - **위치:** 오른쪽 패널의 상단 부분
   - 현재 스크린샷에서 보이는 것: `P1_actualDeliveryDate` 문서의 필드 목록
   - `P1` 문서를 클릭하면 오른쪽 패널 상단에 **"+ 컬렉션 시작"** 버튼이 보입니다
   - 이 버튼을 클릭하면 `P1` 문서 아래에 서브컬렉션을 생성할 수 있습니다

3. **서브컬렉션 ID 입력**
   - 팝업 창이 나타나면
   - 컬렉션 ID: `members` 입력
   - "다음" 또는 "Next" 클릭

**결과:** 
- `projects/P1/members` 서브컬렉션이 생성됩니다
- 왼쪽 패널에서 `projects` → `P1`을 펼치면 `members`가 보입니다

---

### Step 3: 첫 번째 멤버 문서 생성 (Admin)

1. **`members` 서브컬렉션으로 이동**
   - **왼쪽 패널:** `projects` → `P1` → `members` 클릭
   - **중간 패널:** `members` 서브컬렉션의 문서 목록이 표시됩니다 (현재 비어있음)

2. **"+ 문서 추가" 버튼 클릭**
   - **위치:** 중간 패널 상단의 **"+ 문서 추가"** 버튼
   - 이 버튼을 클릭하면 새 문서를 만들 수 있습니다

3. **문서 ID 입력**
   - Admin 사용자의 UID 입력
   - **UID 확인 방법:**
     - Firebase Console 왼쪽 메뉴에서 **Authentication** 클릭
     - **Users** 탭 클릭
     - Admin 계정 찾기
     - **UID** 열에서 UID 복사 (예: `abc123def456...`)

4. **필드 추가**

   **필드 1: `role`**
   - 오른쪽 패널에서 **"+ 필드 추가"** 버튼 클릭
   - 필드 이름: `role`
   - 필드 타입: **string** 선택
   - 값: `admin` 입력

   **필드 2: `allowedProcesses`**
   - 다시 **"+ 필드 추가"** 버튼 클릭
   - 필드 이름: `allowedProcesses`
   - 필드 타입: **array** 선택
   - 배열 요소: 비워두기 (빈 배열 `[]`)
     - 배열 요소 추가 버튼("+")을 클릭하지 않고 바로 저장

5. **저장** 클릭

**결과:** 
- `projects/P1/members/{ADMIN_UID}` 문서가 생성됩니다
- 중간 패널에 생성한 문서가 목록에 나타납니다

---

## 📸 화면별 단계

### Step 1 화면: projects 컬렉션 생성

```
왼쪽 패널
├── kcolumn (기존)
├── user_roles (기존)
└── [+ 컬렉션 시작] ← 클릭
    └── 컬렉션 ID: projects 입력
        └── 다음 클릭
            └── 문서 ID: P1 입력
                └── 저장
```

### Step 2 화면: members 서브컬렉션 생성

```
왼쪽 패널          중간 패널      오른쪽 패널
├── projects   →   P1       →   [+ 컬렉션 시작] ← 클릭
    └── P1         (선택됨)      └── 컬렉션 ID: members 입력
                                    └── 다음 클릭
```

### Step 3 화면: 멤버 문서 생성

```
왼쪽 패널          중간 패널          오른쪽 패널
├── projects   →   members      →   [+ 문서 추가] ← 클릭
    └── P1         (서브컬렉션)      └── 문서 ID: {ADMIN_UID} 입력
        └── members                     └── 필드 추가:
                                            ├── role (string): admin
                                            └── allowedProcesses (array): []
                                                └── 저장
```

---

## 🔍 Admin UID 확인 방법

### Firebase Console에서 확인

1. Firebase Console 왼쪽 메뉴에서 **Authentication** 클릭
2. **Users** 탭 클릭
3. Admin 계정 찾기
4. **UID** 열에서 UID 복사

**예시:**
```
Email: admin@example.com
UID: abc123def456ghi789jkl012mno345pqr678
```

---

## ✅ 생성 후 확인

### 1. 구조 확인

왼쪽 패널에서 다음 구조가 보이는지 확인:

```
projects
└── P1
    └── members
        └── {ADMIN_UID}
```

### 2. 필드 확인

`{ADMIN_UID}` 문서를 클릭하여 필드 확인:

- `role`: `"admin"` ✅
- `allowedProcesses`: `[]` (빈 배열) ✅

### 3. 애플리케이션에서 테스트

1. Admin 계정으로 로그인
2. 프로젝트 페이지 접속
3. 브라우저 콘솔에서 확인:
   ```javascript
   loadUserRoleFromFirebase().then(role => {
       console.log('역할:', role);
   });
   ```

**예상 출력:**
```
역할: {role: "admin", allowedProcesses: []}
```

---

## 🐛 문제 해결

### 문제 1: "+ 컬렉션 시작" 버튼이 보이지 않음

**해결:**
- 왼쪽 패널 상단을 확인
- 브라우저 새로고침
- 다른 브라우저에서 시도

### 문제 2: `P1` 문서를 클릭했는데 서브컬렉션 버튼이 없음

**해결:**
- 오른쪽 패널 상단의 "+ 컬렉션 시작" 버튼 확인
- `P1` 문서가 실제로 선택되었는지 확인 (파란색으로 하이라이트)
- 문서 상세 화면이 오른쪽 패널에 표시되는지 확인

### 문제 3: 배열 필드를 어떻게 추가하나요?

**해결:**
1. 필드 타입을 **array**로 선택
2. 배열 요소 추가 버튼("+")을 **클릭하지 않고** 바로 저장
   - 또는 첫 번째 요소에 아무 값도 입력하지 않고 저장
3. 빈 배열 `[]`로 저장됨

### 문제 4: 생성 후에도 왼쪽 패널에 `projects`가 보이지 않음

**해결:**
1. 브라우저 새로고침 (F5)
2. 왼쪽 패널 스크롤하여 확인
3. 검색창에 `projects` 입력하여 찾기

---

## 📝 빠른 참조

### 전체 경로
```
projects → P1 → members → {ADMIN_UID}
```

### 필수 필드
- `role`: `"admin"` (string)
- `allowedProcesses`: `[]` (array, 빈 배열)

### 생성 순서
1. `projects` 컬렉션 생성
2. `P1` 문서 생성
3. `members` 서브컬렉션 생성
4. `{ADMIN_UID}` 문서 생성 (필드 추가)

---

**작성 완료일**: 2026-01-25
