{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../src/app/%28auth%29/pending/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { createClient } from '@/lib/supabase/client';\n\nexport default function PendingPage() {\n  const [email, setEmail] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [verified, setVerified] = useState(false);\n  const [resendLoading, setResendLoading] = useState(false);\n  const [resendMessage, setResendMessage] = useState<{\n    type: 'success' | 'error';\n    text: string;\n  } | null>(null);\n  const [countdown, setCountdown] = useState(60);\n  const router = useRouter();\n  const supabase = createClient();\n\n  useEffect(() => {\n    const storedEmail = sessionStorage.getItem('pending_email');\n    if (!storedEmail) {\n      router.push('/signup');\n      return;\n    }\n    setEmail(storedEmail);\n    setLoading(false);\n\n    const interval = setInterval(async () => {\n      const response = await fetch('/api/auth/verify-status', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email: storedEmail }),\n      });\n      const data = await response.json();\n\n      if (data.verified) {\n        clearInterval(interval);\n        setVerified(true);\n        handleAutoLogin(storedEmail);\n      }\n    }, 3000);\n\n    return () => clearInterval(interval);\n  }, [router]);\n\n  useEffect(() => {\n    if (countdown > 0) {\n      const timer = setTimeout(() => setCountdown(countdown - 1), 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [countdown]);\n\n  const handleAutoLogin = async (email: string) => {\n    const password = sessionStorage.getItem('pending_password');\n    if (!password) {\n      router.push('/login');\n      return;\n    }\n\n    const { error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    });\n\n    if (!error) {\n      sessionStorage.removeItem('pending_email');\n      sessionStorage.removeItem('pending_password');\n      router.push('/');\n    } else {\n      router.push('/login');\n    }\n  };\n\n  const handleResendEmail = async () => {\n    if (!email) return;\n    setResendLoading(true);\n    setResendMessage(null);\n\n    const { error } = await supabase.auth.resend({\n      type: 'signup',\n      email,\n      options: {\n        emailRedirectTo: `${window.location.origin}/pending`,\n      },\n    });\n\n    if (error) {\n      setResendMessage({ type: 'error', text: error.message });\n    } else {\n      setResendMessage({\n        type: 'success',\n        text: '인증 메일을 재발송했습니다. 메일함을 확인해주세요.',\n      });\n      setCountdown(60);\n    }\n    setResendLoading(false);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center\">\n        <div className=\"w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center bg-blue-500/10\">\n          <span className=\"block w-8 h-8 border-3 border-blue-500/20 border-t-[#667eea] rounded-full animate-spin\"></span>\n        </div>\n        <h1 className=\"text-[22px] font-bold mb-3 text-slate-50 tracking-tighter\">\n          확인 중...\n        </h1>\n        <p className=\"text-[14px] text-slate-400 leading-relaxed\">\n          계정 상태를 확인하고 있습니다.\n        </p>\n      </div>\n    );\n  }\n\n  if (verified) {\n    return (\n      <div className=\"text-center\">\n        <div className=\"w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center bg-green-500/10\">\n          <svg\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"#4ade80\"\n            strokeWidth=\"2\"\n            className=\"w-10 h-10\"\n          >\n            <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\" />\n            <polyline points=\"22 4 12 14.01 9 11.01\" />\n          </svg>\n        </div>\n        <h1 className=\"text-[22px] font-bold mb-3 text-slate-50 tracking-tighter\">\n          이메일 인증 완료!\n        </h1>\n        <p className=\"text-[14px] text-slate-400 leading-relaxed\">\n          메인 페이지로 이동합니다...\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"text-center\">\n      <div className=\"w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center bg-orange-500/10\">\n        <div className=\"relative w-20 h-20\">\n          <svg\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"#fb923c\"\n            strokeWidth=\"2\"\n            className=\"w-10 h-10 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 animate-[mailPulse_2s_ease-in-out_infinite]\"\n          >\n            <path d=\"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z\" />\n            <polyline points=\"22,6 12,13 2,6\" />\n          </svg>\n          <div className=\"absolute bottom-[-8px] left-1/2 -translate-x-1/2 flex gap-1.5\">\n            <span className=\"w-1.5 h-1.5 bg-[#fb923c] rounded-full animate-[dotBounce_1.4s_ease-in-out_infinite]\"></span>\n            <span className=\"w-1.5 h-1.5 bg-[#fb923c] rounded-full animate-[dotBounce_1.4s_ease-in-out_infinite_0.2s]\"></span>\n            <span className=\"w-1.5 h-1.5 bg-[#fb923c] rounded-full animate-[dotBounce_1.4s_ease-in-out_infinite_0.4s]\"></span>\n          </div>\n        </div>\n      </div>\n      <h1 className=\"text-[22px] font-bold mb-3 text-slate-50 tracking-tighter\">\n        이메일 인증 대기 중\n      </h1>\n      <p className=\"text-[14px] text-slate-400 leading-relaxed mb-2\">\n        아래 이메일로 인증 링크를 발송했습니다.\n      </p>\n      <div className=\"font-medium color-[#60a5fa] bg-blue-500/10 px-4 py-2 rounded-md inline-block my-3\">\n        {email}\n      </div>\n      <p className=\"text-[14px] text-slate-400 leading-relaxed mb-2\">\n        메일함에서 인증 링크를 클릭해주세요.\n      </p>\n      <p className=\"text-[12px] text-slate-500\">스팸함도 확인해주세요.</p>\n\n      <div className=\"mt-5 p-4 bg-slate-600/10 rounded-lg\">\n        <div className=\"text-[13px] text-slate-500 mb-2\">\n          인증 메일을 받지 못하셨나요?\n        </div>\n        <div\n          className={`text-[28px] font-bold tabular-nums ${\n            countdown === 0 ? 'text-green-400' : 'text-slate-400'\n          }`}\n        >\n          {countdown}\n        </div>\n      </div>\n\n      <div className=\"mt-7 flex flex-col gap-3\">\n        {countdown === 0 && (\n          <button\n            onClick={handleResendEmail}\n            disabled={resendLoading}\n            className=\"w-full px-6 py-3 text-[14px] font-medium font-inherit text-white bg-[linear-gradient(135deg,#667eea_0%,#764ba2_100%)] border-none rounded-lg cursor-pointer transition-all hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {resendLoading ? '발송 중...' : '인증 메일 재발송'}\n          </button>\n        )}\n        <button\n          onClick={() => {\n            sessionStorage.removeItem('pending_email');\n            sessionStorage.removeItem('pending_password');\n            router.push('/signup');\n          }}\n          className=\"w-full px-6 py-3 text-[14px] font-medium font-inherit text-slate-400 bg-slate-600/20 border border-slate-600/20 rounded-lg cursor-pointer transition-all hover:bg-slate-600/30\"\n        >\n          다른 이메일로 가입\n        </button>\n      </div>\n\n      {resendMessage && (\n        <div\n          className={`mt-4 p-3 rounded-lg text-[13px] ${\n            resendMessage.type === 'success'\n              ? 'bg-green-500/10 border border-green-500/20 text-green-400'\n              : 'bg-red-500/10 border border-red-500/20 text-red-400'\n          }`}\n        >\n          {resendMessage.text}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1]}